(window["webpackJsonpmy-cab"]=window["webpackJsonpmy-cab"]||[]).push([[0],{100:function(e,a,t){},130:function(e,a){},133:function(e,a,t){},134:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),c=t(27),l=t.n(c),o=(t(76),t(1)),r=t(2),i=t(4),m=t(3),u=t(5),d=(t(77),t(8)),p=t(10),h=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).handleLogout=function(){sessionStorage.removeItem("access-token")},e.state={isLogin:!1},e}return Object(u.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=null;return e=this.props.isAuth?s.a.createElement("ul",{className:"nav navbar-nav navbar-right"},s.a.createElement("li",null,s.a.createElement(d.b,{to:"/",className:"smoothScroll"},"home")),s.a.createElement("li",null,s.a.createElement(d.b,{to:"/new-event",className:"smoothScroll"},"new event")),s.a.createElement("li",null,s.a.createElement(d.b,{to:"/booknow",className:"smoothScroll"},"join")),s.a.createElement("li",null,s.a.createElement("a",{href:"/",className:"smoothScroll",onClick:this.handleLogout},"logout"))):s.a.createElement("ul",{className:"nav navbar-nav navbar-right"},s.a.createElement("li",null,s.a.createElement(d.b,{to:"/login",className:"smoothScroll"},"login")),s.a.createElement("li",null,s.a.createElement(d.b,{to:"/register",className:"smoothScroll"},"register"))),s.a.createElement("section",{className:"navbar navbar-default navbar-fixed-top",role:"navigation"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"navbar-header"},s.a.createElement("button",{className:"navbar-toggle","data-toggle":"collapse","data-target":".navbar-collapse"},s.a.createElement("span",{className:"icon icon-bar"}),s.a.createElement("span",{className:"icon icon-bar"}),s.a.createElement("span",{className:"icon icon-bar"})),s.a.createElement(d.b,{to:"/",className:"navbar-brand"},"my event")),s.a.createElement("div",{className:"collapse navbar-collapse"},e,s.a.createElement("ul",{className:"nav navbar-nav navbar-right"},s.a.createElement("li",null,s.a.createElement(d.b,{to:"/contact",className:"smoothScroll"},"contact us"))))))}}]),a}(n.Component);var b=Object(p.b)((function(e){return{isAuth:e.authReducer.isAuth}}))(h),v=t(17),E=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement("section",{id:"home",className:"home"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 col-sm-12"},s.a.createElement("h1",null,"welcome to my event"),s.a.createElement("h1",null,"ready to go.."),s.a.createElement(d.b,{to:"/login",className:"btn btn-default"},"book now")))))}}]),a}(s.a.Component),g=t(15),f=t(13),N=(t(42),t(39)),k=t.n(N),w={headers:{Authorization:"Bearer "+sessionStorage.getItem("access-token")}},y={get:function(e,a){k.a.get("/api/"+e,w).then((function(e){a(e)}),(function(e){403==e.response.status&&(window.location.href="/"),a(e.response)}))},post:function(e,a,t){k.a.post("/api/"+e,a,w).then((function(e){t(e)}),(function(e){e.response&&403==e.response.status&&(window.location.href="/"),t(e.response)}))}},j=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).handleSubmit=function(){var a={name:e.state.name,email:e.state.email,msg:e.state.message};y.post("contact",a,(function(a){a.data.status&&e.setState({query:!1})}))},e.state={name:"",email:"",message:"",query:!0},e.handleInputChange=e.handleInputChange.bind(Object(f.a)(e)),e}return Object(u.a)(a,e),Object(r.a)(a,[{key:"handleInputChange",value:function(e){var a=e.target,t=a.value,n=a.name;this.setState(Object(g.a)({},n,t))}},{key:"render",value:function(){var e=null;return e=this.state.query?s.a.createElement("div",null,s.a.createElement("form",{className:"form-group"},s.a.createElement("div",{className:""},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-user"}),"name"),s.a.createElement("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-envelope"}),"email"),s.a.createElement("input",{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-comments-o"}),"message/feedback"),s.a.createElement("textarea",{type:"text",className:"form-control",name:"message",value:this.state.message,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleSubmit},"submit")))):s.a.createElement("p",null,"thanks for your query/feedback"),s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row contact"},s.a.createElement("div",{className:"col-md-5 col-sm-5 wow fadeInUp","data-wow-delay":"0.6s"},s.a.createElement("h2",{className:"heading"},"contact us"),e),s.a.createElement("div",{className:"col-md-4 col-sm-4 wow fadeInUp","data-wow-delay":"0.6s"},s.a.createElement("h2",{className:"heading"},"contact info."),s.a.createElement("div",{className:""},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-phone"})," phone"),s.a.createElement("h4",null,"+91-7972393094")),s.a.createElement("div",{className:"address"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-map-marker"})," address"),s.a.createElement("h4",null,"my event pvt. ltd. "),s.a.createElement("h4",null,"bengaluru KA India")))),s.a.createElement("div",{className:"row contact"})))}}]),a}(n.Component),O=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).handleLogin=function(){var e={email:t.state.email,password:t.state.password};y.post(t.loginUrl,e,(function(e){404==e.status||401==e.status?t.setState({error:e.data.message}):200==e.status&&e.data.auth?(sessionStorage.setItem("access-token",e.data.token),sessionStorage.setItem("email",e.data.email),window.location.href="/booknow"):t.setState({error:"something went wrong"})}))},sessionStorage.getItem("access-token")&&e.history.push("/booknow"),t.loginUrl="auth/login",t.state={email:"",password:"",error:""},t.handleInputChange=t.handleInputChange.bind(Object(f.a)(t)),t}return Object(u.a)(a,e),Object(r.a)(a,[{key:"handleInputChange",value:function(e){var a=e.target,t=a.value,n=a.name;this.setState(Object(g.a)({},n,t))}},{key:"render",value:function(){var e=null;return this.state.error&&(e=s.a.createElement("div",{className:"error"},s.a.createElement("span",null,this.state.error," "))),s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row contact"},s.a.createElement("form",{className:"form-group"},s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-envelope"}),"email"),s.a.createElement("input",{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-key"}),"password"),s.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.handleInputChange})),e,s.a.createElement("div",{className:"submit"},s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleLogin,disabled:!(this.state.email&&this.state.password)},"login"))))))}}]),a}(n.Component),C=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).handleRegister=function(){if(e.state.password!==e.state.confirmpassword)e.setState({passwordMismatch:!0});else{var a={email:e.state.email,password:e.state.password};y.post(e.registerUrl,a,(function(a){201==a.status&&(e.setState({registration:!0}),setTimeout((function(){e.props.history.push("/login")}),2e3))}))}},e.registerUrl="auth/register",e.state={email:"",password:"",confirmpassword:"",passwordMismatch:!1,error:!1,registration:!1},e.handleInputChange=e.handleInputChange.bind(Object(f.a)(e)),e}return Object(u.a)(a,e),Object(r.a)(a,[{key:"handleInputChange",value:function(e){var a,t=e.target,n=t.value,s=t.name;this.setState((a={},Object(g.a)(a,s,n),Object(g.a)(a,"passwordMismatch",!1),a))}},{key:"render",value:function(){var e=null;return this.state.passwordMismatch&&(e=s.a.createElement("div",{className:"error"},s.a.createElement("span",null,"password mismatch"))),this.state.registration&&(e=s.a.createElement("div",{className:"msg"},s.a.createElement("p",null,"registration success!!"),s.a.createElement("p",null,"redirecting to login page"))),s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row contact"},s.a.createElement("form",{className:"form-group"},s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-envelope"}),"email"),s.a.createElement("input",{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-key"}),"password"),s.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,s.a.createElement("i",{className:"fa fa-key"}),"confirm password"),s.a.createElement("input",{type:"password",className:"form-control",name:"confirmpassword",value:this.state.confirmpassword,onChange:this.handleInputChange})),e,s.a.createElement("div",{className:"submit"},s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleRegister,disabled:!(this.state.email&&this.state.password&&this.state.confirmpassword)},"register"))))))}}]),a}(n.Component),I=(t(100),t(51),function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this;console.log(this.props.cabs[0]&&this.props.cabs[0].joiners&&this.props.cabs[0].joiners.indexOf(sessionStorage.getItem("email")));var a=s.a.createElement("p",null,"loading events....");return this.props.cabs&&this.props.cabs.length>0&&(a=this.props.cabs.map((function(a){return s.a.createElement("section",{id:"item",key:a._id,className:"wow fadeInUp","data-wow-delay":"0.3s"},s.a.createElement("div",{className:"card mb-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 cab-detail"},s.a.createElement("img",{src:"https://pngimage.net/wp-content/uploads/2018/05/event-png-1.png",className:"img-cvr",alt:"...",width:"10%",height:"20%"}),s.a.createElement("div",{className:"submit"},a.joiners&&a.joiners.indexOf(sessionStorage.getItem("email"))>-1?s.a.createElement("button",{type:"button",className:"btn btn-success",disabled:!0},"joined"):s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.props.handleBook(a)}},"join"),a.likers&&a.likers.indexOf(sessionStorage.getItem("email"))>-1?s.a.createElement("button",{type:"button",className:"btn btn-success",disabled:!0},"liked"):s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.props.handleLike(a)}},"like")),s.a.createElement("span",{className:"card-footer"},"Joined ",a.joined," Likes ",a.likes)),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Event:",a.eventName),s.a.createElement("span",{className:"amount"},"Location:",a.location),s.a.createElement("p",{className:"card-text"}," Sponsor:",a.sponsorName),s.a.createElement("p",{className:"card-text"}," ",a.description))))))}))),s.a.createElement("section",{id:"",className:"parallax-section"},a)}}]),a}(n.Component));var x=Object(p.b)((function(e){return{cabs:e.cabReducer}}),(function(e){return{bookCab:function(a){e({type:"Book_Cab",payload:a})},getCabs:function(a){e({type:"Get_Cabs",payload:a})}}}))(I),S=t(69),_=t.n(S).a.connect("/"),B=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).state={start:"",end:"",searchcab:!1,joinLike:{},isjoined:!1,isliked:!1},e}return Object(u.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;_.on("joinedLiked",(function(a){console.log(a),e.props.updateCabs(a.event)})),_.on("newEvent",(function(a){console.log(a),e.props.updateCabs(a.event)})),y.get("cab",(function(a){a.status&&200==a.status&&e.props.getCabs(a.data)}))}},{key:"handleBooking",value:function(e){console.log(e),this.props.updateCabs(e),_.emit("join-event",{client:sessionStorage.getItem("email"),count:e.joined+1,cabId:e._id,joined:!0})}},{key:"handleLike",value:function(e){console.log(e),this.props.updateCabs(e),_.emit("join-event",{client:sessionStorage.getItem("email"),count:e.likes+1,cabId:e._id,liked:!0})}},{key:"render",value:function(){return s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-9 col-sm-9 wow fadeInUp search-results","data-wow-delay":"0.6s"},s.a.createElement(x,{state:this.state,handleLike:this.handleLike.bind(this),handleBook:this.handleBooking.bind(this)})))))}}]),a}(n.Component);var L=Object(p.b)(null,(function(e){return{getCabs:function(a){e({type:"Get_Cabs",payload:a})},updateCabs:function(a){e({type:"Update_Cabs",payload:a})}}}))(B),U=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.get("/booking",(function(a){e.props.getBookings(a.data)}))}},{key:"getDateTime",value:function(e){return new Date(e).toISOString().slice(0,19).replace("T"," ")}},{key:"render",value:function(){var e=this,a=s.a.createElement("p",null,"loading bookings....");return this.props.bookings&&this.props.bookings.length>0&&(a=this.props.bookings.map((function(a){return s.a.createElement("section",{id:"item",key:a._id,className:"wow fadeInUp","data-wow-delay":"0.3s"},s.a.createElement("div",{className:"card mb-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-2 cab-detail"},s.a.createElement("img",{src:"./images/"+a.cab_type+".png",className:"img-cvr",alt:"...",width:"10%",height:"20%"}),s.a.createElement("p",{className:"card-text"},a.cab_number)),s.a.createElement("div",{className:"col-md-9"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"name: ",a.driver_name),s.a.createElement("span",{className:"amount"},"amount: $100"),s.a.createElement("p",{className:"card-text"},"contact: ",a.driver_number),s.a.createElement("p",{className:"card-text"},"date: ",e.getDateTime(a.booking_time)))))))}))),s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-9 col-sm-9 wow fadeInUp search-results","data-wow-delay":"0.6s"},a))))}}]),a}(n.Component);var R=Object(p.b)((function(e){return{bookings:e.bookingReducer}}),(function(e){return{getBookings:function(a){e({type:"Get_Bookings",payload:a})}}}))(U),G=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id;y.get("booking/"+a,(function(a){200==a.status&&e.props.getLiveBooking(a.data)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("h2",null,"live booking"),s.a.createElement("p",null,"your booking has been confirmed,Please find below details"),s.a.createElement("p",null,"cab number : ",this.props.liveBooking.cab_number," ",s.a.createElement("br",null),"driver name : ",this.props.liveBooking.driver_name,s.a.createElement("br",null),"driver number : ",this.props.liveBooking.driver_number," ",s.a.createElement("br",null),"start location : ",this.props.liveBooking.start," ",s.a.createElement("br",null),"end location : ",this.props.liveBooking.end," ",s.a.createElement("br",null)))))}}]),a}(n.Component);var M=Object(p.b)((function(e){return{liveBooking:e.livebookingReducer}}),(function(e){return{getLiveBooking:function(a){e({type:"Get_Live_Booking",payload:a})}}}))(G),A=(t(133),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).handleSubmit=function(){var e={eventName:t.state.eventName,sponsorName:t.state.sponsorName,location:t.state.location,description:t.state.description};y.post("cab",e,(function(e){console.log(e),201==e.status&&t.props.history.push("/booknow")}))},t.state={eventName:"",email:"",sponsorName:"",location:"",description:""},t.handleInputChange=t.handleInputChange.bind(Object(f.a)(t)),t}return Object(u.a)(a,e),Object(r.a)(a,[{key:"handleInputChange",value:function(e){var a=e.target,t=a.value,n=a.name;this.setState(Object(g.a)({},n,t))}},{key:"render",value:function(){return s.a.createElement("div",{className:"parallax-section content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row contact"},s.a.createElement("div",{className:"col-md-5 col-sm-5 wow fadeInUp","data-wow-delay":"0.6s"},s.a.createElement("h2",{className:"heading"},"create event"),s.a.createElement("div",null,s.a.createElement("form",{className:"form-group"},s.a.createElement("div",{className:""},s.a.createElement("p",null,"event name"),s.a.createElement("input",{type:"text",className:"form-control",name:"eventName",value:this.state.eventName,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,"sponsor name"),s.a.createElement("input",{type:"text",className:"form-control",name:"sponsorName",value:this.state.sponsorName,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,"location"),s.a.createElement("input",{type:"text",className:"form-control",name:"location",value:this.state.location,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("p",null,"description"),s.a.createElement("textarea",{type:"text",className:"form-control",name:"description",value:this.state.description,onChange:this.handleInputChange})),s.a.createElement("div",{className:"submit"},s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleSubmit},"submit"))))))))}}]),a}(n.Component)),D=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b,null),s.a.createElement(v.c,null,s.a.createElement(v.a,{exact:!0,path:"/",component:E}),s.a.createElement(v.a,{exact:!0,path:"/login",component:O}),s.a.createElement(v.a,{exact:!0,path:"/register",component:C}),s.a.createElement(v.a,{exact:!0,path:"/contact",component:j}),s.a.createElement(v.a,{exact:!0,path:"/booknow",component:L}),s.a.createElement(v.a,{exact:!0,path:"/bookings",component:R}),s.a.createElement(v.a,{exact:!0,path:"/new-event",component:A}),s.a.createElement(v.a,{exact:!0,path:"/livebooking/:id",component:M})))}}]),a}(n.Component),q=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement(D,null)}}]),a}(s.a.Component),T=t(21),J=t(70),z={isAuth:!!sessionStorage.getItem("access-token")},K=[],P={},$=Object(T.c)(Object(T.b)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;arguments.length>1&&arguments[1];return e},cabReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"Get_Cabs":return a.payload;case"Update_Cabs":return[].concat(Object(J.a)(e.filter((function(e){return e._id!==a.payload._id}))),[a.payload]);default:return e}},bookingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"Get_Bookings":return a.payload;default:return e}},livebookingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"Get_Live_Booking":return a.payload[0];default:return e}}}));l.a.render(s.a.createElement(p.a,{store:$},s.a.createElement(d.a,null,s.a.createElement(q,null))),document.getElementById("root"))},42:function(e,a,t){},51:function(e,a,t){},71:function(e,a,t){e.exports=t(134)},76:function(e,a,t){},77:function(e,a,t){}},[[71,1,2]]]);
//# sourceMappingURL=main.689fdcee.chunk.js.map